<div class="error" *ngIf="repoError">
  <br> {{repoError}}
</div>

<br>
<section class="repo_details" *ngFor="let data of repoData">
  <div class="repo_details-chart_button" (click)="(chartIsLive ? '' : chart()); repo_chart.classList.toggle('active')">
    <b>CHARTS!!</b>
    <br>We got them!
  </div>
 
  <div #repo_chart class="repo_details-chart">
    <div class="repo_details-chart_title">
      <b>I know this doesn't make sense, <br> but i didn't have time to make a pretty bubble chart!</b>
    </div>
    <svg id="chart_svg">
    </svg>
  </div>

  <div class="box_style repo_details-inner">
    <div class="repo_details-intro_wrap">
      <div class="repo_details-img">
        <img src="{{data.owner.avatar_url}}" alt="{{data.full_name}}" width="120" height="120">
      </div>
      <div class="repo_details-intro">
        <h1>
          {{data.full_name}}
          <a href="{{data.html_url}}" target="_blank" rel="noopener" class="repo_details-outlink">
            <svg xmlns="http://www.w3.org/2000/svg" version="1" viewBox="0 0 512 512">
              <path d="M312 200c-6-7-12-12-20-17a119 119 0 0 0-149 17L35 308a119 119 0 0 0 169 169l89-89a9 9 0 0 0-6-15h-3c-19 0-37-3-55-10-3-2-7-1-9 1l-64 65a51 51 0 1 1-73-73l109-108c20-20 53-20 72 0 14 12 35 12 48 0 6-6 10-14 10-22 1-10-3-19-10-26z"
              />
              <path d="M477 35c-47-47-122-47-169 0l-89 89a9 9 0 0 0 6 15h3c19 0 37 4 55 11 3 1 6 0 9-2l64-64a51 51 0 1 1 73 72l-81 80v1l-28 28a51 51 0 0 1-73 0 35 35 0 0 0-48 0 34 34 0 0 0 0 48c10 10 22 18 35 24l5 2 5 2 6 2 5 1a138 138 0 0 0 23 3h12l6-1h8l3-1 5-1h1c21-5 40-16 55-31l109-109c47-47 47-122 0-169z"
              />
            </svg>
          </a>
        </h1>

        <span class="repo_details-date">
          <b>Created:</b> {{data.created_at | date:'yyyy-MM-dd'}}
        </span>
        <span class="repo_details-date">
          <b>Updated:</b> {{data.updated_at | date:'yyyy-MM-dd'}}
        </span>
        <br>
        <p>
          <b>Description:</b> {{data.description}}
        </p>
      </div>
    </div>

    <div class="tac">
      <span class="repo_details-info">
        <svg viewBox="0 0 14 16">
          <path d="M14 6l-4.9-.6L7 1 4.9 5.4 0 6l3.6 3.3-1 4.7L7 11.7l4.3 2.3-.9-4.7L14 6z" />
        </svg>
        <span>Stargazers:
          <b>{{data.stargazers_count}}</b>
        </span>
      </span>


      <span class="repo_details-info">
        <svg viewBox="0 0 25.9 25.9">
          <path d="M15.8 26h-5.6l-.1-.2V17c-.8-.8-1.8-1.7-2.6-2.8-1-1.3-2.2-3-2.3-5.2V6.2h-3C2 6 2 6 2.1 6l5-6h.2l5 6c0 .2 0 .3-.2.2H9.4v2.9c0 .3 0 1 .7 1.8a17 17 0 0 0 2.9 3.2 29.3 29.3 0 0 0 2.9-3.2c.6-.9.7-1.5.7-1.8V6.2h-2.9-.2V6l5-6H18.8l5 6V6l-.1.1h-3v2.9c0 2.2-1.2 4-2.2 5.2L16 17v8.8l-.2.1z"
          />
        </svg>

        <span>Forks:
          <b>{{data.forks_count}}</b>
        </span>
      </span>

      <span class="repo_details-info">
        <svg viewBox="0 0 16 16">
          <path d="M8 2C3 2 0 8 0 8s3 6 8 6 8-6 8-6-3-6-8-6zm0 10a4 4 0 1 1 0-8 4 4 0 0 1 0 8zm2-4a2 2 0 0 1-2 2 2 2 0 0 1-2-2c0-1.1.9-2 2-2a2 2 0 0 1 2 2z"
          />
        </svg>

        <span>Subscribers:
          <b>{{data.subscribers_count}}</b>
        </span>
      </span>

      <span class="repo_details-info" *ngIf="data.license">
        <svg xmlns="http://www.w3.org/2000/svg" version="1" viewBox="0 0 460 460">
          <path d="M279 392h-30V113h128l-54 86a9 9 0 0 0 16 10l47-75 47 75a9 9 0 0 0 16-10l-54-86a15 15 0 0 0 0-29H288c-6-9-15-16-25-19a33 33 0 0 0-66 0c-10 3-19 10-25 19H65a15 15 0 1 0 0 29l-54 86a9 9 0 0 0 16 10l47-75 47 75a9 9 0 0 0 16-10l-54-86h128v279h-30c-19 0-33 15-33 33h164c0-18-14-33-33-33z"
          />
          <path d="M143 223H5c-3 0-5 3-5 5a74 74 0 0 0 148 0c0-2-2-5-5-5zM455 223H317c-3 0-5 3-5 5a74 74 0 0 0 148 0c0-2-2-5-5-5z"
          />
        </svg>

        <span>License:
          <b>{{data.license.key}}</b>
        </span>
      </span>


      <span class="repo_details-info">
        <svg viewBox="0 0 14 16">
          <path d="M7 2.3a5.7 5.7 0 0 1 0 11.4A5.7 5.7 0 0 1 1.3 8c0-3.1 2.6-5.7 5.7-5.7zM7 1a7 7 0 1 0 0 14A7 7 0 0 0 7 1zm1 3H6v5h2V4zm0 6H6v2h2v-2z"
          />
        </svg>
        <span>Open issues:
          <b>{{data.open_issues_count}}</b>
        </span>
      </span>
    </div>

    <br>
    <br>
    <br>
    <div class="tac" *ngIf="data.open_issues_count">
      <a href="/issues/{{'?user=' + data.owner.login + '&name=' + data.name}}" class="button button--next">
        Show issues
      </a>
    </div>
  </div>
</section>